
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://wmo-im.github.io/wis2box-training/practical-sessions/installing-wis2box-with-test-data/">
      
      
        <link rel="prev" href="../access-your-student-vm/">
      
      
        <link rel="next" href="../converting-synop-data-to-bufr/">
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>Installing wis2box with test data - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../css/print-site.css">
    
      <link rel="stylesheet" href="../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-wis2box-with-test-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installing wis2box with test data
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/wmo-im/wis2box-training" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wmo-im/wis2box-training" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../overviews/" class="md-nav__link">
        Overviews
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Practical sessions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Practical sessions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../connecting-to-mqtt/" class="md-nav__link">
        Connecting to WIS2 over MQTT
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../access-your-student-vm/" class="md-nav__link">
        Accessing your student VM
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installing wis2box with test data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Installing wis2box with test data
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-your-wis2box-setup" class="md-nav__link">
    Access your wis2box setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-and-setup-environment-variables-in-devenv" class="md-nav__link">
    Review and setup environment variables in dev.env
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-wis2box" class="md-nav__link">
    Start wis2box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-configuration-steps-for-wis2box" class="md-nav__link">
    Runtime configuration steps for wis2box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data" class="md-nav__link">
    Ingesting data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../converting-synop-data-to-bufr/" class="md-nav__link">
        Converting SYNOP data to BUFR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../converting-csv-data-to-bufr/" class="md-nav__link">
        Converting CSV data to BUFR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-data-mappings/" class="md-nav__link">
        Configuring data mappings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-wis2-discovery-metadata/" class="md-nav__link">
        Configuring WIS2 discovery metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-station-metadata/" class="md-nav__link">
        Configuring station metadata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-ingest-and-monitoring/" class="md-nav__link">
        Data ingest and monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../downloading-data-from-wis2/" class="md-nav__link">
        Downloading data from WIS2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Cheatsheets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Cheatsheets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/linux/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheets/wis2box/" class="md-nav__link">
        WIS2 in a box
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-your-wis2box-setup" class="md-nav__link">
    Access your wis2box setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review-and-setup-environment-variables-in-devenv" class="md-nav__link">
    Review and setup environment variables in dev.env
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-wis2box" class="md-nav__link">
    Start wis2box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-configuration-steps-for-wis2box" class="md-nav__link">
    Runtime configuration steps for wis2box
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingesting-data" class="md-nav__link">
    Ingesting data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installing-wis2box-with-test-data">Installing wis2box with test data</h1>
<h2 id="introduction">Introduction</h2>
<p>In this session you will learn how to install wis2box on your student VM and get familiar with the runtime configuration steps and web interfaces. You will also use predefined configuration and sample data to allow for review of the services provided by your wis2box.</p>
<h2 id="access-your-wis2box-setup">Access your wis2box setup</h2>
<p>Login to your designated VM with your username and password.</p>
<p>Your home directory should already contain the exercise materials you downloaded earlier as part of the <a href="../access-your-student-vm/">Accessing your student VM</a> session.</p>
<p>Go into the directory containing the wis2box training setup:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/exercise-materials/wis2box-setup
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can always find the latest 'wis2box-setup' archive at <a href="https://github.com/wmo-im/wis2box/releases">https://github.com/wmo-im/wis2box/releases</a></p>
<p>The contents of the 'wis2box-setup' directory are similar to that you will find when downloading and extracting <code>wis2box-setup-*.zip</code> from the official wis2box download page.</p>
</div>
<h2 id="review-and-setup-environment-variables-in-devenv">Review and setup environment variables in <code>dev.env</code></h2>
<p>Copy <code>test.env</code> to <code>dev.env</code>:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>test.env<span class="w"> </span>dev.env
</code></pre></div>
<p>Review the contents of <code>dev.env</code>.</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>dev.env
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>dev.env</code> is a required file always used by wis2box</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>WIS2BOX_HOST_DATADIR</code> is set to <code>${PWD}/test-data</code>.  This directory will be mapped as <code>/data/wis2box</code> inside the <strong>wis2box-management</strong> container.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>LOGGING_LEVEL</code> is set to <code>INFO</code>.  The <code>LOGGING_LEVEL</code> for a wisbox default installation is <code>WARNING</code>.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Inspect the content of <code>test-data/data-mappings.yml</code>, what topics are configured in this file?</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Inspect the content of <code>test-data/metadata/station/station_list.csv</code>.  How many stations are defined in this file?</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Inspect the content in the <code>test-data/observations</code> directory.  What is the data format used?  What type of observations are reported?</p>
</div>
<p>Before starting wis2box, add your student VM host to the VM by editing the <code>dev.env</code> file using a command-line editor (vi/vim/nano):</p>
<p>And ensure you dev.env now has the additional environment-variables specifying <strong>your</strong> VM host:</p>
<div class="highlight"><pre><span></span><code>WIS2BOX_URL=http://&lt;your-host&gt;
WIS2BOX_API_URL=http://&lt;your-host&gt;/oapi
</code></pre></div>
<h2 id="start-wis2box">Start wis2box</h2>
<p>start wis2box with the following command:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<p>Wait until the command has completed.</p>
<p>Inspect the status with the following command:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<p>Repeat this command until you are sure all services are up and running.</p>
<p>Open a web browser and visit the page <code>http://&lt;your-host&gt;</code>.</p>
<p>This is the default wis2box web application (running via the <strong>wis2box-ui</strong> container).  We see that the homepage is empty, given no datasets are setup yet.</p>
<p>On your web browser, open a new tab and navigate to the page <code>http://&lt;your-host&gt;/oapi</code>.</p>
<p>This is the wis2box API (running via the <strong>wis2box-api</strong> container).</p>
<p>To view collections currently published to the API, navigate to the page <code>http://&lt;your-host&gt;/oapi/collections</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What collection is currently available?</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>How many data notifications have been published?</p>
</div>
<p>Make sure you can connect to your broker (running via the <strong>wis2box-broker</strong> container) using MQTT Explorer with the following connection details:</p>
<ul>
<li><strong>Protocol: mqtt://</strong></li>
<li><strong>Host: <your-host></strong></li>
<li><strong>Port: 1883</strong></li>
<li><strong>Username: wis2box</strong></li>
<li><strong>Password: wis2box</strong></li>
<li>under 'ADVANCED', subscribe to the topics <code>$SYS</code> and <code>origin/#</code></li>
</ul>
<p>You should see statistics being published by your broker on the <code>$SYS</code> topic. Keep MQTT Explorer running and continue with the runtime configuration steps.</p>
<h2 id="runtime-configuration-steps-for-wis2box">Runtime configuration steps for wis2box</h2>
<p>Login to the <strong>wis2box-management</strong> container using the following command:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command is equivalent to <code>docker exec -it wis2box-management /bin/bash</code>, meaning that you have entered an interactive shell inside the <strong>wis2box-management</strong> container.</p>
</div>
<p>Run the following command to see the environment variables used by your wis2box:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>environment<span class="w"> </span>show
</code></pre></div>
<p>Note the variables you have set for <code>WIS2BOX_HOST_DATADIR</code>, <code>WIS2BOX_URL</code> and <code>WIS2BOX_API_URL</code>.</p>
<p>Run the following command to see the content of <code>/data/wis2box</code> directory inside the <strong>wis2box-management</strong> container:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/data/wis2box/
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The content of <code>/data/wis2box</code> matches that of the directory defined by <code>$WIS2BOX_HOST_DATADIR</code> on your VM.</p>
</div>
<p>Run the following command to add the test dataset:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>add-collection<span class="w"> </span>/data/wis2box/mwi-surface-weather-observations.yml
</code></pre></div>
<ul>
<li>Go back to your web browser and refresh the <code>http://&lt;your-host&gt;/oapi/collections</code> page.  Inspect the new collection.</li>
</ul>
<p>Run the following command to publish discovery metadata for the test dataset:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>metadata<span class="w"> </span>discovery<span class="w"> </span>publish<span class="w"> </span>/data/wis2box/mwi-surface-weather-observations.yml
</code></pre></div>
<p>Go back to your web browser and refresh the <code>http://&lt;your-host&gt;/oapi/collections</code> page.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What new collection is now available?</p>
</div>
<p>Switch back to MQTT Explorer and find the discovery metadata message that was published by your broker.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What is the topic is used to publish the discovery metadata message?</p>
</div>
<p>Run the following command to publish the station metadata in <code>test-data/metadata/station/station_list.csv</code>:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>metadata<span class="w"> </span>station<span class="w"> </span>publish-collection
</code></pre></div>
<p>Go back to your web browser and refresh the <code>http://&lt;your-host&gt;/oapi/collections</code> page. Inspect the collection called "Stations" and confirm that all stations from <code>test-data/station/station_list.csv</code> are now visible.</p>
<h2 id="ingesting-data">Ingesting data</h2>
<p>Make you are logged in to the <strong>wis2box-management</strong> container (<code>python3 wis2box-ctl.py login</code>) and execute the following command:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>ingest<span class="w"> </span>-th<span class="w"> </span>mwi.mwi_met_centre.data.core.weather.surface-based-observations.synop<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/observations/malawi/
</code></pre></div>
<p>Ensure that the command completes successfully without errors.</p>
<p>Review the collections on your API <code>http://&lt;your-host&gt;/oapi/collections</code> page.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What changes do you observe?</p>
</div>
<p>Click the the "EXPLORE" option on <code>http://&lt;your-host&gt;</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What changes do you observe?</p>
</div>
<p>Check your wis2box workflow monitoring on <code>http://&lt;your-host&gt;:3000</code> (powered by the <strong>grafana</strong> container).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Can you identify any errors?</p>
</div>
<p>View the messages that have been published on your local broker in MQTT Explorer.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>What is the topic used to publish messages advertising new data? What is the URL to download the data?</p>
</div>
<h2 id="conclusion">Conclusion</h2>
<div class="admonition success">
<p class="admonition-title">Congratulations!</p>
<p>In this practical session, you learned how to:</p>
<ul>
<li>install wis2box on your personal VM</li>
<li>setup wis2box with the pre-defined configuration</li>
<li>start wis2box and check the status of its components</li>
<li>run the various wis2box runtime configuration steps</li>
<li>access the wis2box web application, API, and Grafana dashboard</li>
</ul>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
    
  </body>
</html>